<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Liste des Morceaux</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .track {
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        .loading {
            color: #666;
            font-style: italic;
        }
    </style>
</head>
<body>
    <h1>Liste des Morceaux</h1>
    <div id="tracks-container">
        <p class="loading">Chargement en cours...</p>
    </div>

    <script>
        // Configuration
        const SUPABASE_URL = "https://sxwppdcaahnzhkqdvdpd.supabase.co/rest/v1/songs?select=*";
        const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN4d3BwZGNhYWhuemhrcWR2ZHBkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDIyMzY2MjIsImV4cCI6MjA1NzgxMjYyMn0.UHtyHqsOPDExggrz5lQmeKAyuOJZhXeVSlASKc6z5sc";
        
        // Headers équivalents à votre commande PowerShell
        const headers = {
            "apikey": SUPABASE_KEY,
            "Authorization": `Bearer ${SUPABASE_KEY}`,
            "Content-Type": "application/json"
        };
        
        // Récupération des données
        async function getTracks() {
            try {
                const response = await fetch(SUPABASE_URL, {
                    method: 'GET',
                    headers: headers
                });
                
                if (!response.ok) {
                    throw new Error(`Erreur HTTP: ${response.status}`);
                }
                
                const tracks = await response.json();
                displayTracks(tracks);
                
            } catch (error) {
                console.error("Erreur:", error);
                document.getElementById('tracks-container').innerHTML = 
                    `<p class="error">Erreur lors du chargement: ${error.message}</p>`;
            }
        }
        
        // Affichage des morceaux
        function displayTracks(tracks) {
            const container = document.getElementById('tracks-container');
            
            if (!tracks || tracks.length === 0) {
                container.innerHTML = '<p>Aucun morceau trouvé</p>';
                return;
            }
            
            let html = '';
            tracks.forEach(track => {
                html += `
                    <div class="track">
                        <h3>${track.title || 'Sans titre'}</h3>
                        <p>Artiste: ${track.artist || 'Inconnu'}</p>
                        <p>Durée: ${track.duration || '--:--'}</p>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        // Lancement au chargement de la page
        window.addEventListener('DOMContentLoaded', getTracks);
    </script>
</body>
</html>
