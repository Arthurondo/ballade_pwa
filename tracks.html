<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ballade - Liste des Morceaux</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        .track {
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        .track:hover {
            background-color: #f5f5f5;
        }
    </style>
</head>
<body>
    <div id="tracks-container"></div>

    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script>
        // Configuration Supabase
        const supabaseUrl = "https://sxwppdcaahnzhkqdvdpd.supabase.co";
        const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN4d3BwZGNhYWhuemhrcWR2ZHBkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDIyMzY2MjIsImV4cCI6MjA1NzgxMjYyMn0.UHtyHqsOPDExggrz5lQmeKAyuOJZhXeVSlASKc6z5sc";
        
        // Initialiser Supabase
        const supabase = supabase.createClient(supabaseUrl, supabaseKey);

        // Fonction pour charger les morceaux
        async function loadTracks() {
            try {
                const { data, error } = await supabase
                    .from('songs')
                    .select('*');
                
                if (error) throw error;
                
                displayTracks(data);
            } catch (error) {
                console.error("Erreur:", error);
                document.getElementById('tracks-container').innerHTML = 
                    `<p>Erreur lors du chargement des morceaux: ${error.message}</p>`;
            }
        }

        // Fonction pour afficher les morceaux
        function displayTracks(tracks) {
            const container = document.getElementById('tracks-container');
            
            if (!tracks || tracks.length === 0) {
                container.innerHTML = "<p>Aucun morceau disponible</p>";
                return;
            }
            
            let html = '';
            tracks.forEach(track => {
                html += `
                    <div class="track">
                        <h3>${track.title || 'Titre inconnu'}</h3>
                        <p>Artiste: ${track.artist || 'Inconnu'}</p>
                        <p>Durée: ${track.duration || '--:--'}</p>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Charger les morceaux au démarrage
        document.addEventListener('DOMContentLoaded', loadTracks);
    </script>
</body>
</html>
