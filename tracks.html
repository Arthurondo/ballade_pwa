<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Liste des morceaux de l'application Ballade">
    <title>Ballade - Liste des Morceaux</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon.ico">
</head>
<body>
    <header>
        <nav class="main-nav">
            <a href="index.html" class="nav-link">
                <i class="fas fa-home"></i> Accueil
            </a>
            <a href="tracks.html" class="nav-link active">
                <i class="fas fa-music"></i> Morceaux
            </a>
            <a href="map.html" class="nav-link">
                <i class="fas fa-map-marked-alt"></i> Carte
            </a>
        </nav>
    </header>

    <main class="container">
        <noscript>
            <div class="error">Activez JavaScript pour utiliser cette application</div>
        </noscript>
        
        <h1 class="page-title">Liste des Morceaux</h1>
        
        <div id="message" class="message-box"></div>
        
        <!-- Section de recherche -->
        <div class="search-section">
            <input type="text" id="search-input" placeholder="Rechercher un morceau..." class="search-input">
            <button id="search-btn" class="search-btn">
                <i class="fas fa-search"></i> Rechercher
            </button>
        </div>
        
        <!-- Filtres -->
        <div class="filters">
            <select id="genre-filter" class="filter-select">
                <option value="">Tous les genres</option>
                <!-- Options seront ajoutées dynamiquement -->
            </select>
            
            <select id="artist-filter" class="filter-select">
                <option value="">Tous les artistes</option>
                <!-- Options seront ajoutées dynamiquement -->
            </select>
            
            <button id="reset-filters" class="reset-btn">
                <i class="fas fa-redo"></i> Réinitialiser
            </button>
        </div>
        
        <!-- Tableau des morceaux -->
        <div id="tracks-table" class="tracks-container">
            <!-- Contenu généré par JavaScript -->
        </div>
        
        <!-- Lecteur audio -->
        <div class="audio-player-container">
            <div class="no-audio">Sélectionnez un morceau</div>
            <audio id="audio-player" controls class="audio-player"></audio>
        </div>

        <!-- Widget Météo avec wttr.in -->
        <section class="weather-widget">
            <h2><i class="fas fa-cloud-sun"></i> Météo à Strasbourg</h2>
            <iframe 
                src="https://wttr.in/Strasbourg?format=%l+%c+%t+%h+%w+%m&lang=fr" 
                class="weather-iframe"
                frameborder="0"
                title="Prévisions météo">
            </iframe>
        </section>
    </main>

    <!-- Section API -->
    <section class="api-section">
        <h2><i class="fas fa-database"></i> Gestion des Morceaux</h2>
        
        <div class="api-form">
            <h3>Ajouter un nouveau morceau</h3>
            <form id="add-track-form">
                <input type="text" id="track-title" placeholder="Titre" required>
                <input type="text" id="track-artist" placeholder="Artiste" required>
                <input type="text" id="track-genre" placeholder="Genre">
                <input type="text" id="track-duration" placeholder="Durée (mm:ss)">
                <input type="url" id="track-url" placeholder="URL du fichier audio">
                <button type="submit" class="api-btn">
                    <i class="fas fa-plus"></i> Ajouter
                </button>
            </form>
        </div>
        
        <div class="api-form">
            <h3>Modifier un morceau</h3>
            <form id="update-track-form">
                <input type="text" id="update-id" placeholder="ID du morceau" required>
                <input type="text" id="update-title" placeholder="Nouveau titre">
                <input type="text" id="update-artist" placeholder="Nouvel artiste">
                <input type="text" id="update-genre" placeholder="Nouveau genre">
                <input type="text" id="update-duration" placeholder="Nouvelle durée">
                <input type="url" id="update-url" placeholder="Nouvelle URL audio">
                <button type="submit" class="api-btn">
                    <i class="fas fa-sync-alt"></i> Mettre à jour
                </button>
            </form>
        </div>
        
        <div class="api-form">
            <h3>Supprimer un morceau</h3>
            <form id="delete-track-form">
                <input type="text" id="delete-id" placeholder="ID du morceau" required>
                <button type="submit" class="api-btn delete-btn">
                    <i class="fas fa-trash-alt"></i> Supprimer
                </button>
            </form>
        </div>
    </section>

    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="tracks.js" type="module"></script>
</body>
</html>
