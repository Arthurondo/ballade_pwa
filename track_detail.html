<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Détails du morceau</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <img src="img/logo.png" alt="Logo" class="logo">
    <nav>
        <ul>
            <li><a href="index.html">🏠 Accueil</a></li>
            <li><a href="tracks.html">🎵 Morceaux</a></li>
            <li><a href="map.html">🗺 Carte</a></li>
        </ul>
    </nav>
</header>

<main>
    <h1 id="track-title">Détails du morceau</h1>
    
    <!-- Métadonnées -->
    <div class="track-info">
        <p><strong>🎵 Titre :</strong> <span id="track-name">---</span></p>
        <p><strong>🎤 Artiste :</strong> <span id="track-artist">---</span></p>
        <p><strong>💿 Album :</strong> <span id="track-album">---</span></p>
    </div>

    <!-- Lecteur Audio -->
    <div class="audio-player">
        <audio id="audio-player">
            <source id="audio-source" src="" type="audio/mp3">
            Votre navigateur ne supporte pas l’audio.
        </audio>
        
        <input type="range" id="progress-bar" value="0" max="100">
        
        <div class="controls">
            <button id="backward">⏪ -10s</button>
            <button id="play-pause">▶️</button>
            <button id="forward">⏩ +10s</button>
            <button id="loop">🔁</button>
        </div>

        <div class="time-info">
            <span id="current-time">0:00</span> / <span id="duration">0:00</span>
        </div>
    </div>

    <!-- Playlist -->
    <div class="playlist">
        <h2>📜 Liste de lecture</h2>
        <ul id="playlist">
            <!-- Les morceaux seront ajoutés dynamiquement ici -->
        </ul>
    </div>
</main>

<script src="js/audio.js"></script>

<script>
    const params = new URLSearchParams(window.location.search);
    const track = params.get("track");

    const tracks = {
        "track1.mp3": { title: "Morceau 1", artist: "Artiste 1", album: "Album A" },
        "track2.mp3": { title: "Morceau 2", artist: "Artiste 2", album: "Album B" },
        "track3.mp3": { title: "Morceau 3", artist: "Artiste 3", album: "Album C" }
    };

    if (track && tracks[track]) {
        document.getElementById("audio-source").src = "music/" + track;
        document.getElementById("audio-player").load();
        document.getElementById("track-title").innerText = tracks[track].title;
        document.getElementById("track-name").innerText = tracks[track].title;
        document.getElementById("track-artist").innerText = tracks[track].artist;
        document.getElementById("track-album").innerText = tracks[track].album;
    }

    // Générer la playlist
    const playlistElement = document.getElementById("playlist");
    Object.keys(tracks).forEach(key => {
        const li = document.createElement("li");
        li.innerText = tracks[key].title;
        li.addEventListener("click", () => {
            window.location.href = `track_detail.html?track=${key}`;
        });
        playlistElement.appendChild(li);
    });
</script>

</body>
</html>

